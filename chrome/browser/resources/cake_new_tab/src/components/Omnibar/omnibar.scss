$omnibar-min-height: 26px;
$omnibar-transition-duration: 0.35s;
$omnibar-transition-icon-duration-offset: 0.05s;
$omnibar-transition-input-duration-offset: 0.08s;

.omnibar {
  @include flex-container;
  position: relative;

  &.omnibar--show {

    .omnibar__input-bar {
      filter: blur(0px);
    }

    .ck-icon {
      transform: scale(1);
      opacity: 1;

      svg {
        opacity: 1;
      }
    }

    .ck-chat-input {
      opacity: 1;
      
      .ck-chat-input__input {
        caret-color: var(--secondary-color);
      }

      .ck-chat-input__ph > p > span::after {
        left: 100%;
      }
    }
  }
}

.omnibar__input-bar {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: flex-start;
  width: var(--col1-width-md);
  filter: blur(2px);
  transition: filter $omnibar-transition-duration var(--tt-ease);

  .ck-icon {
    transform-origin: center center;
    transform: scale(0);
    transition: transform calc(#{$omnibar-transition-duration} + #{$omnibar-transition-icon-duration-offset}) var(--tt-ease);

    svg {
      opacity: 0;
      transition: opacity calc(#{$omnibar-transition-duration} + #{$omnibar-transition-icon-duration-offset}) var(--tt-ease);
    }
  }

  .ck-chat-input {
    margin-left: 14px;
    opacity: 0;
    transition: opacity calc(#{$omnibar-transition-duration} + #{$omnibar-transition-input-duration-offset}) var(--tt-ease);
    position: relative;
    z-index: 0;

    .ck-chat-input__input {
      caret-color: transparent;
      transition: caret-color calc(#{$omnibar-transition-duration} + #{$omnibar-transition-input-duration-offset}) var(--tt-ease);
    }
    
    .ck-chat-input__ph > p > span {
      position: relative;

      &::after {
        content: '';
        position: absolute;
        left: -5px;
        top: -5px;
        bottom: -5px;
        right: 0;
        background-image: linear-gradient(to right, transparent 0, var(--primary-color) 40px);
        z-index: 1;
        transition: left calc(#{$omnibar-transition-duration} + #{$omnibar-transition-input-duration-offset}) var(--tt-ease);
      }
    }
  }
}